<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <title>חיתוך אותיות</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        body { text-align: center; background: #f0f0f0; font-family: Arial; }
        img { max-width: 80%; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>חתוך את האות א</h1>
    <img id="image" src="{{ image_url }}">
    <br><br>
    <button id="saveCrop">שמור</button>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script>
        const image = document.getElementById('image');
        const cropper = new Cropper(image, {
            aspectRatio: NaN,
            viewMode: 1,
            autoCropArea: 0.8
        });

        document.getElementById('saveCrop').addEventListener('click', () => {
            const canvas = cropper.getCroppedCanvas();
            canvas.toBlob((blob) => {
                const formData = new FormData();
                formData.append('croppedImage', blob, 'crop.png');

                fetch('/save_crop', { method: 'POST', body: formData })
                    .then(res => res.text())
                    .then(data => alert(data));
            });
        });
    </script>
</body>
</html>
